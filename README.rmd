---
output:
  md_document:
    variant: markdown_github
---

# Purpose

Purpose of this README is to display the solutions to the exam questions.


```{r}

rm(list = ls()) # Clean your environment:
gc() # garbage collection - It can be useful to call gc after a large object has been removed, as this may prompt R to return memory to the operating system.
library(tidyverse)
list.files('code/', full.names = T, recursive = T) %>% .[grepl('.R', .)] %>% as.list() %>% walk(~source(.))
```
#Starting Off

I will now set the folder structure for the project, creating different folders for the different questions. 

```{r, eval = F}
CHOSEN_LOCATION <- "C:/Users/hanna/Documents/Studium/MA/3. Semester/Data Science/26802597/"
fmxdat::make_project(FilePath = glue::glue("{CHOSEN_LOCATION}/"), 
                     ProjNam = "26802597")
Texevier::create_template_html(directory = glue::glue("{CHOSEN_LOCATION}/"), template_name = "Question1")
Texevier::create_template_html(directory = glue::glue("{CHOSEN_LOCATION}/"), template_name = "Question2")
Texevier::create_template_html(directory = glue::glue("{CHOSEN_LOCATION}/"), template_name = "Question3")
Texevier::create_template_html(directory = glue::glue("{CHOSEN_LOCATION}/"), template_name = "Question4")
```
#Question 1 

In question 1, I will first start with looking at the experience of African countries specifically and how they were affected by the pandemic. 

#Question 2

```{r}
list.files('Question2/code/', full.names = T, recursive = T) %>% as.list() %>% walk(~source(.))
#Load in data
weather <- read.csv("data/London/london_weather.csv")
View(weather)

#Change date column from integer to date column
library(lubridate)

weather <- transform(weather, date = as.Date(as.character(date), "%Y%m%d"))
df_weather <- weather
df_weather$date <- format(weather$date, format="%Y")
```


#Question 4

```{r}
library(pacman)
p_load(tidyverse, lubridate)

# Source in all your functions:
# walk is the 'silent' version of map, which is similar to lapply.
list.files('Question4/code/', full.names = T, recursive = T) %>% as.list() %>% walk(~source(.))
```


In question 4, after setting up my Texevier template by changing my name, date etc., and sourcing in my relevant functions that I stored in the code file, I first start with reading in my data normally using the read.csv function. I read in both data frames separately because I do not see a common variable by which to join both data frames. I concentrated on the titles data frame since it had more variables and thus more information available for plots and tables. 

In my first graph I looked at the evolution of IMDb, TMDb scores and IMDb votes. I gave them different colours to make it visually nicer and then put all of the three graphs into one as a better overview and as an introduction into my short report. 

```{r,  warning =  FALSE, fig.align = 'center', fig.cap = "Evolution of Movie Critique.\\label{Figure1}", fig.ext = 'png', fig.height = 5, fig.width = 7}
titles <- read.csv("question4/data/netflix/titles.csv")
g<- movie_critic(titles)
g
```
For  my second graph, I first checked how many movies were released each year since the start of the database. I then create a new data frame out of that and merge it with the original one to include the number of released movies per year. I then create a new column where I aggregate each IMDb score of each movie released in each year and then divide it by the number of movies released in that year. Then I plot it displaying only the years from 2000 on because there fewer IMDb scores available which would bias the results. 

```{r,  warning =  FALSE, fig.align = 'center', fig.cap = "Average IMDb Score.\\label{Figure2}", fig.ext = 'png', fig.height = 5, fig.width = 7}
g <- average_score_per_movier(titles)
g
```
Then in my table, I only looked at the genres column of my data frame that only had the number of movies and genres, and then ordered it with the highest number first. I then extracted the first 9 columns and used the gt package to make a table of of my resulting new data frame. 

```{r,  warning =  FALSE, fig.align = 'center', fig.cap = "Most Popular Movie Genres.\\label{Figure3}", fig.ext = 'png', fig.height = 5, fig.width = 7}
t <- table_genre(titles)
t
```


